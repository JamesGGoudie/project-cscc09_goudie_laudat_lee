<!-- <div style="position:absolute; top: 70px; left: 0; padding: 10px; color:white; background: rgba(0,0,0,0.2);">
  <h3>Controls</h3>
  <p>shift+ G                 = Translate (Grab)</p>
  <p>shift+ S                 = Scale</p>
  <p>shift+ R                 = Rotate</p>
  <p>shift+ +                 = Increase size of control</p>
  <p>shift+ -                 = Decrease size of control</p>
  <p>hold Shift              = turn on snap to grid</p>
  <p>Left-click and drag     = orbit</p>
  <p>Right-click and drag    = pan</p>
  <p>Scroll                  = zoom in/out</p>
  <p>shift+D                 = deselect current object</p>
  <p>shift+Backspace          = delete current object</p>
  <p>shift+Z                  = reset camera</p>
</div> -->
<input id="file-upload" type="file" multiple="false" (change)="onFileInput($event.target.files);">

<div id="top-menu" class="panel">
  <button mat-flat-button color="primary" [matMenuTriggerFor]="import_menu">Import</button>
  <mat-menu #import_menu="matMenu">
    <button mat-menu-item (click)="importScene()">JSON</button>
  </mat-menu>

  <button mat-flat-button color="primary" [matMenuTriggerFor]="export_menu">Export</button>
  <mat-menu #export_menu="matMenu">
    <button mat-menu-item (click)="exportScene('json', 'download')">Download as JSON</button>
    <button mat-menu-item (click)="exportScene('obj', 'download')">Download as Wavefront (.OBJ)</button>
    <button mat-menu-item (click)="exportScene('stl', 'download')">Download as STL (.STL)</button>
    <button mat-menu-item (click)="exportScene('dae', 'download')">Download as Collada (.DAE)</button>
    <!-- <button mat-menu-item>Save to Google Drive</button> -->
  </mat-menu>
</div>

<div id="tool-menu" class="panel" >
  <mat-button-toggle-group>
    <mat-button-toggle (click)="changeTool('translate')">Move</mat-button-toggle>
    <mat-button-toggle (click)="changeTool('scale')">Scale</mat-button-toggle>
    <mat-button-toggle (click)="changeTool('rotate')">Rotate</mat-button-toggle>
  </mat-button-toggle-group>  
</div>

<div id="side-menu" class="panel">
  <mat-accordion multi="true" displayMode="flat">
    <mat-expansion-panel>
      <mat-expansion-panel-header>Add Object</mat-expansion-panel-header>
      <button mat-flat-button color="primary" (click)="addNewObject('box')">Box</button>
      <button mat-flat-button color="primary" (click)="addNewObject('cone')">Cone</button>
    </mat-expansion-panel>

    <mat-expansion-panel *ngIf="getCurrentObject()">
      <mat-expansion-panel-header>Edit Object</mat-expansion-panel-header>
      
      <!-- OBJECT SPECIFIC PROPERTIES (NAME, POSITION, SCALE, ROTATION) -->
      <form [formGroup]="objForm" >
        <mat-form-field appearance="fill" color="primary">
          <mat-label>Name</mat-label>
          <input matInput type="text" formControlName="name" name="name" (change)="updateObjectName()">
        </mat-form-field>

        <mat-accordion multi="true" displayMode="flat">
          <mat-expansion-panel>
            <mat-expansion-panel-header>Position</mat-expansion-panel-header>
            <mat-form-field appearance="fill" color="primary">
              <mat-label>X</mat-label>
              <input matInput type="number" formControlName="posX" (change)="updateObjectPosition()">
            </mat-form-field>
            <mat-form-field appearance="fill" color="primary">
              <mat-label>Y</mat-label>
              <input matInput type="number" formControlName="posY" (change)="updateObjectPosition()">
            </mat-form-field>
            <mat-form-field appearance="fill" color="primary">
              <mat-label>Z</mat-label>
              <input matInput type="number" formControlName="posZ" (change)="updateObjectPosition()">
            </mat-form-field>
          </mat-expansion-panel>

          <mat-expansion-panel>
            <mat-expansion-panel-header>Scale</mat-expansion-panel-header>
            <mat-form-field appearance="fill" color="primary">
              <mat-label>X</mat-label>
              <input matInput type="number" formControlName="scaX" (change)="updateObjectScale()">
            </mat-form-field>
            <mat-form-field appearance="fill" color="primary">
              <mat-label>Y</mat-label>
              <input matInput type="number" formControlName="scaY" (change)="updateObjectScale()">
            </mat-form-field>
            <mat-form-field appearance="fill" color="primary">
              <mat-label>Z</mat-label>
              <input matInput type="number" formControlName="scaZ" (change)="updateObjectScale()">
            </mat-form-field>
          </mat-expansion-panel>

          <mat-expansion-panel>
            <mat-expansion-panel-header>Rotation</mat-expansion-panel-header>
            <mat-form-field appearance="fill" color="primary">
              <mat-label>X</mat-label>
              <input matInput type="number" formControlName="rotX" (change)="updateObjectRotation()">
            </mat-form-field>
            <mat-form-field appearance="fill" color="primary">
              <mat-label>Y</mat-label>
              <input matInput type="number" formControlName="rotY" (change)="updateObjectRotation()">
            </mat-form-field>
            <mat-form-field appearance="fill" color="primary">
              <mat-label>Z</mat-label>
              <input matInput type="number" formControlName="rotZ" (change)="updateObjectRotation()">
            </mat-form-field>
          </mat-expansion-panel>

          <!-- MATERIAL (COLOR) -->
          <mat-expansion-panel>
            <mat-expansion-panel-header>Material</mat-expansion-panel-header>
            <color-sketch disableAlpha="true" presetColors="" color="#888" (onChange)="updateObjectMaterial($event)"></color-sketch>
          </mat-expansion-panel>
        </mat-accordion>
      </form>
      <button mat-flat-button color="warn" class="delete-button" (click)="deleteCurrentObject()">DELETE OBJECT</button>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>Object List</mat-expansion-panel-header>
      <ul *ngFor="let obj of getObjectList()">
        <li><button mat-flat-button disableRipple="false" (click)="selectObject(obj)">{{obj.name}}</button></li>
      </ul>
    </mat-expansion-panel>
  </mat-accordion>
</div>
